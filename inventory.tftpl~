[webservers]
%{~ for i in webservers ~}
${i["name"]} ansible_host=${i["network_interface"][0]["nat_ip_address"]} platform_id=${i["platform_id"i]"}}
%{~ endfor ~}

#[webservers]
#%{ for vm in webservers }
#${vm.name} ansible_host=${vm.network_interface[0].ip_address} fqdn=${vm.fqdn}
#%{ endfor }

[databases]
%{ for vm in databases }
${vm.name} ansible_host=${vm.network_interface[0].ip_address} fqdn=${vm.fqdn}
%{ endfor }

[storage_servers]
%{ for vm in storage }
${vm.name} ansible_host=${vm.network_interface[0].ip_address} fqdn=${vm.fqdn}
%{ endfor }

[bastion_host]
${bastion_name} ansible_host=${bastion_ip}

[all:vars]
ansible_ssh_user=ubuntu
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -q ubuntu@${bastion_ip}"'
